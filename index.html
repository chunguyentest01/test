<!DOCTYPE html>
<html>
<head>
<title>Hiệu ứng chim mồi</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="css.css">
<link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Function to parse CSV data
    function parseCSV(data) {
      var rows = data.trim().split('\n');
      var header = rows[0].split(',');

      var result = [];

      for (var i = 1; i < rows.length; i++) {
        var values = rows[i].split(',');
        var entry = {};

        for (var j = 0; j < header.length; j++) {
          entry[header[j]] = values[j];
        }

        result.push(entry);
      }

      return result;
    }

    // Function to generate a random game entry
    function getRandomGame(data) {
      var randomIndex = Math.floor(Math.random() * data.length);
      return data[randomIndex];
    }

    // Function to create a chart
    function createChart(gameData) {
      var ctx = document.getElementById('myChart').getContext('2d');

      var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
      var avgPlayers = months.map(function (month) {
        var entry = gameData.find(function (data) {
          return data.Month.includes(month);
        });
        return entry ? parseFloat(entry["Avg. Players"]) : 0;
      });

      var myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: months,
          datasets: [{
            label: 'Average Players',
            data: avgPlayers,
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1
          }]
        }
      });
    }

    // Event listener for the "Tin tức" button
    document.getElementById('loadDataButton').addEventListener('click', function () {
      var csvFilePath = "test_data.csv"; // Đường dẫn tương đối đến file CSV
      var xhr = new XMLHttpRequest();

      xhr.onreadystatechange = function () {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          if (xhr.status === 200) {
            var csvData = xhr.responseText;
            var parsedData = parseCSV(csvData);
            var randomGame = getRandomGame(parsedData);
            createChart([randomGame]);
          } else {
            alert('Failed to load CSV file.');
          }
        }
      };

      xhr.open('GET', csvFilePath, true);
      xhr.send();
    });
  });
</script>

  
</head>
<body class="w3-content" style="max-width:1300px">

<!-- First Grid: Logo & About -->
<div class="w3-row">
  <div class="w3-half w3-black w3-container w3-center" style="height:700px">
    <div class="w3-padding-64">
      <h1>TRƯỜNG ĐẠI HỌC BÌNH DƯƠNG</h1>
      <h2>KHOA CÔNG NGHỆ THÔNG TIN, ROBOT VÀ TRÍ TUỆ NHÂN TẠO</h2>
      <h4>TIỂU LUẬN MÔN KHOA HỌC DỮ LIỆU</h4>
      <h4>TÊN ĐỀ TÀI: TĂNG TỈ LỆ NGƯỜ CHƠI CŨ TRỞ LẠI GAME KHI ĐÃ RỜI BỎ</h4>
    </div>
    <div class="w3-padding-64">
      <a href="#" class="w3-button w3-black w3-block w3-hover-blue-grey w3-padding-16">Trang đầu</a>
      <a href="#work" class="w3-button w3-black w3-block w3-hover-teal w3-padding-16">Phần chức năng</a>
      <a href="#work" class="w3-button w3-black w3-block w3-hover-dark-grey w3-padding-16">Phần đầu ra</a>
      <a href="#contact" class="w3-button w3-black w3-block w3-hover-brown w3-padding-16">Cuối trang</a>
    </div>
  </div>
  <div class="w3-half w3-blue-grey w3-container" style="height:700px">
    <div class="w3-padding-64 w3-center">
      <h1>Giảng viên giảng dạy: ThS. Huỳnh Quang Đức</h1>
      <h4>Nhóm sinh viên thực hiện gồm 3 người, bao gồm:</h4>
      <h4>1. Phạm Nguyễn Chu Nguyên - MSSV: 21050043</h4>
      <h4>2. Nguyễn Văn Tiến - MSSV: 21050038</h4>
      <img src="logo.png" alt="Logo khoa" width="40%" height="auto">
      </div>
    </div>
  </div>
</div>

<!-- Second Grid -->
<div class="w3-row">
  <div class="w3-half w3-light-grey w3-center" style="min-height:800px" id="work">
    <div class="w3-padding-64">
      <h2>Phần chức năng</h2>
      <button class="button-1" role="button" id="loadDataButton">Khách hàng tiềm năng</button>
      <button class="button-1" role="button">Gợi ý</button>
      <button class="button-1" role="button">Tin tức</button>
    </div>
    <div class="search-box">
      <button class="btn-search"><i class="fas fa-search"></i></button>
      <input type="text" class="input-search" placeholder="Tìm kiếm game...">
    </div>
  </div>
  <div class="w3-half w3-indigo w3-container" style="min-height:800px">
    <div class="w3-padding-64 w3-center">
      <h2>Phần đầu ra</h2>
      <div id="search-results"></div>
    </div>
  </div>
</div>

<!-- Third Grid -->
<div class="w3-row" id="contact">
  <div class="w3-half w3-dark-grey w3-container w3-center" style="height:700px">
    <div class="w3-padding-64">
      <h1>Phần 3</h1>
    </div>
  </div>
  <div class="w3-half w3-teal w3-container" style="height:700px">
    <div class="w3-padding-64 w3-padding-large">
      <h1>Phần 4</h1>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="w3-container w3-black w3-padding-16">
    <p>Giao diện nhóm kham khảo của www.w3schools.com</p>
</footer>

</body>
</html>
